@namespace SampleWasmProject.Components.Core.DropdownMenu
@inherits ShadcnComponentBase

<button type="button"
        role="menuitem"
        disabled="@Disabled"
        class="@GetItemClass()"
        @onclick="HandleClick"
        @attributes="AdditionalAttributes">
    @ChildContent
    @if (!string.IsNullOrEmpty(Shortcut))
    {
        <span class="dropdown-menu-shortcut">@Shortcut</span>
    }
</button>

@code {
    [CascadingParameter]
    private DropdownMenuContext? Context { get; set; }

    /// <summary>
    /// The menu item content.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Keyboard shortcut to display (e.g., "âŒ˜B").
    /// </summary>
    [Parameter]
    public string? Shortcut { get; set; }

    /// <summary>
    /// When true, the item is disabled.
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; }

    /// <summary>
    /// Callback when the item is clicked.
    /// </summary>
    [Parameter]
    public EventCallback<MouseEventArgs> OnClick { get; set; }

    private string GetItemClass()
    {
        var baseClass = "dropdown-menu-item";
        if (Disabled)
            baseClass += " dropdown-menu-item-disabled";
        return MergeCss(baseClass, Class);
    }

    private async Task HandleClick(MouseEventArgs args)
    {
        if (Disabled)
            return;
        await OnClick.InvokeAsync(args);
        Context?.SetOpen?.Invoke(false);
    }
}

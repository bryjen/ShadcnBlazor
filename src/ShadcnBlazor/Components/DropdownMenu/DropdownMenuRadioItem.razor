@inherits ShadcnComponentBase

<div role="menuitemradio"
     aria-checked="@(Group?.SelectedValue == Value)"
     class="@GetItemClass()"
     @onclick="HandleClick"
     @attributes="AdditionalAttributes">
    <span class="dropdown-menu-radio-indicator">
        @if (Group?.SelectedValue == Value)
        {
            <span class="h-2 w-2 bg-current rounded-full"></span>
        }
    </span>
    @ChildContent
    @if (!string.IsNullOrEmpty(Shortcut))
    {
        <span class="dropdown-menu-shortcut">@Shortcut</span>
    }
</div>

@code {
    [CascadingParameter]
    private DropdownMenuRadioGroup? Group { get; set; }

    /// <summary>
    /// The radio item content/label.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// The value associated with this radio item.
    /// </summary>
    [Parameter]
    public string? Value { get; set; } = string.Empty;

    /// <summary>
    /// Keyboard shortcut to display (e.g., "âŒ˜B").
    /// </summary>
    [Parameter]
    public string? Shortcut { get; set; }

    /// <summary>
    /// When true, the item is disabled.
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; }

    private string GetItemClass()
    {
        var baseClass = "dropdown-menu-item dropdown-menu-radio-item";
        if (Disabled)
            baseClass += " dropdown-menu-item-disabled";
        return MergeCss(baseClass, Class);
    }

    private async Task HandleClick(MouseEventArgs args)
    {
        if (Disabled || Group is null)
            return;

        await Group.SelectAsync(Value ?? string.Empty);
    }
}
